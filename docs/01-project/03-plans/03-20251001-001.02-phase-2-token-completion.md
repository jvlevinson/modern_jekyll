# Phase 2: Token System Completion - Implementation Plan
**Document ID**: 03-20251001-001.02
**Created**: October 1, 2025
**Phase Duration**: Week 2 (6-8 hours)
**Priority**: 🟡 High - Foundation for future work
**Dependencies**: Phase 1 complete
**Parent Plan**: 01-20251001-001.00-architectural-improvements.md

---

## Overview

This phase completes the design token system by adding missing token categories and replacing all magic numbers throughout the codebase. This creates a fully systematic, token-based design foundation.

---

## Phase Goals

- ✅ Add border radius token scale
- ✅ Add animation timing token scale
- ✅ Add opacity token scale
- ✅ Replace all magic numbers with tokens
- ✅ Document token usage

---

## Task Breakdown

### Task 2.1: Add Border Radius Tokens
**Priority**: High
**Duration**: 1.5 hours
**Goal**: Systematic border radius scale

#### Files to Modify
1. `_sass/abstracts/_variables.scss`
2. All component SCSS files with border-radius

#### Implementation Steps

**Step 1**: Add border radius scale to variables
```scss
// _sass/abstracts/_variables.scss

:root {
  // Existing tokens...

  // ---------------------------------------------------------------------------
  // Border Radius Scale
  // ---------------------------------------------------------------------------
  --radius-none: 0;
  --radius-xs: 2px;
  --radius-sm: 3px;
  --radius-md: 5px;
  --radius-lg: 10px;
  --radius-xl: 15px;
  --radius-2xl: 20px;
  --radius-pill: 300px;
  --radius-circle: 50%;
}
```

**Step 2**: Find all border-radius instances
```bash
# Search for border-radius in SCSS files
grep -r "border-radius:" _sass/ --include="*.scss"

# Expected output will show files like:
# _sass/components/_buttons.scss:18:  border-radius: 300px;
# _sass/components/_portfolio-flip.scss:143:  border-radius: var(--radius-sm);
# etc.
```

**Step 3**: Replace magic numbers systematically

**Buttons Component**:
```scss
// _sass/components/_buttons.scss

// BEFORE:
.btn {
  border-radius: 300px;
}

// AFTER:
.btn {
  border-radius: var(--radius-pill);
}
```

**Portfolio Flip Component**:
```scss
// _sass/components/_portfolio-flip.scss

// BEFORE (if exists):
.portfolio-box-caption::after {
  border-radius: var(--radius-sm);  // Already done ✅
}

// Verify it uses token
```

**Theme Toggle Component**:
```scss
// _sass/components/_theme-toggle.scss

.theme-toggle {
  border-radius: var(--radius-md);

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
    border-radius: var(--radius-md);
  }
}
```

**Service Box Component**:
```scss
// _sass/components/_service-box.scss

.service-box {
  // Add subtle border radius if needed
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}
```

**Step 4**: Document border radius usage
```scss
// _sass/abstracts/_variables.scss

:root {
  // Border Radius Scale
  // --radius-none: 0          - No rounding
  // --radius-xs: 2px          - Minimal rounding (tags, badges)
  // --radius-sm: 3px          - Small elements (tooltips, small buttons)
  // --radius-md: 5px          - Medium elements (inputs, cards)
  // --radius-lg: 10px         - Large elements (modals, large cards)
  // --radius-xl: 15px         - Extra large (hero cards)
  // --radius-2xl: 20px        - Maximum normal rounding
  // --radius-pill: 300px      - Pills (buttons, tags)
  // --radius-circle: 50%      - Perfect circles (avatars, icons)
}
```

#### Testing Checklist
- [ ] All border-radius values replaced
- [ ] Visual consistency across components
- [ ] No magic numbers remain
- [ ] Tokens documented

---

### Task 2.2: Add Animation Timing Tokens
**Priority**: High
**Duration**: 2 hours
**Goal**: Centralized animation timing system

#### Files to Modify
1. `_sass/abstracts/_variables.scss`
2. All SCSS files with animation/transition timing
3. `_config.yml` (for service delays)

#### Implementation Steps

**Step 1**: Add animation timing tokens
```scss
// _sass/abstracts/_variables.scss

:root {
  // Existing tokens...

  // ---------------------------------------------------------------------------
  // Animation Timing Scale
  // ---------------------------------------------------------------------------

  // Duration
  --duration-instant: 0.1s;
  --duration-fast: 0.2s;
  --duration-normal: 0.35s;
  --duration-slow: 0.5s;
  --duration-slower: 0.75s;
  --duration-slowest: 1s;
  --duration-extra-slow: 1.5s;

  // Delay (for staggered animations)
  --delay-0: 0s;
  --delay-1: 0.1s;
  --delay-2: 0.2s;
  --delay-3: 0.3s;
  --delay-4: 0.4s;
  --delay-5: 0.5s;

  // Easing Functions
  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);

  // Combined (for convenience)
  --transition-instant: var(--duration-instant) var(--ease-out);
  --transition-fast: var(--duration-fast) var(--ease-out);
  --transition-normal: var(--duration-normal) var(--ease-in-out);
  --transition-slow: var(--duration-slow) var(--ease-in-out);
}
```

**Step 2**: Update existing transition tokens (align with new system)
```scss
// _sass/abstracts/_variables.scss

:root {
  // Update these existing tokens:
  --transition-fast: var(--duration-fast) var(--ease-out);      // Was 0.2s ease
  --transition-normal: var(--duration-normal) var(--ease-in-out); // Was 0.35s ease
  --transition-slow: var(--duration-slow) var(--ease-in-out);    // Was 0.5s ease
}
```

**Step 3**: Find all animation/transition instances
```bash
# Search for transitions
grep -r "transition:" _sass/ --include="*.scss"

# Search for animations
grep -r "animation:" _sass/ --include="*.scss"

# Search for animation-delay
grep -r "animation-delay:" _sass/ --include="*.scss"
```

**Step 4**: Replace timing values

**Portfolio Flip**:
```scss
// _sass/components/_portfolio-flip.scss

// BEFORE:
.portfolio-flip-inner {
  transition: transform var(--transition-slow);
}

// AFTER (already using token ✅):
.portfolio-flip-inner {
  transition: transform var(--transition-slow);
}

// Update animations:
@keyframes pulse-corner {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.7;
  }
}

.portfolio-flip-container {
  &::before {
    animation: pulse-corner var(--duration-extra-slow) var(--ease-in-out) infinite;
  }

  &::after {
    animation: pulse-corner var(--duration-extra-slow) var(--ease-in-out) infinite;
    animation-delay: var(--delay-4);
  }
}
```

**Service Box WOW.js Delays**:
```html
<!-- _includes/services.html -->

<!-- BEFORE: -->
<i class="fa-solid fa-4x {{ service.icon }} wow bounceIn" data-wow-delay="{{ service.delay }}"></i>

<!-- AFTER: -->
<i class="fa-solid fa-4x {{ service.icon }} wow bounceIn"
   data-wow-delay="var(--delay-{{ forloop.index }})"></i>
```

**Update _config.yml to use semantic naming**:
```yaml
# _config.yml

services:
  list:
    - icon: fa-diamond
      title: IT Strategy & Leadership
      description: ...
      # Remove delay: 0 (calculated by index)
    - icon: fa-paper-plane
      title: Network & VoIP Standardization
      description: ...
      # Remove delay: .1s (calculated by index)
```

**Step 5**: Document animation timing usage
```scss
// _sass/abstracts/_variables.scss

:root {
  // Animation Timing Scale
  //
  // Duration Guidelines:
  // - instant (0.1s): Micro-interactions (hover highlights, ripples)
  // - fast (0.2s): Quick transitions (color changes, opacity)
  // - normal (0.35s): Standard transitions (most UI elements)
  // - slow (0.5s): Deliberate transitions (modals, slides)
  // - slower (0.75s): Attention-drawing (important state changes)
  // - slowest (1s): Dramatic effects (page transitions)
  // - extra-slow (1.5s): Repeating animations (pulses, loading)
  //
  // Delay Guidelines:
  // - Use for staggered animations (service boxes, portfolio grid)
  // - Increment by 0.1s for smooth cascade effect
}
```

#### Testing Checklist
- [ ] All hardcoded timing values replaced
- [ ] Animations feel consistent
- [ ] No jarring speed changes
- [ ] WOW.js delays work correctly
- [ ] Tokens documented

---

### Task 2.3: Add Opacity Token Scale
**Priority**: Medium
**Duration**: 1 hour
**Goal**: Systematic opacity values

#### Files to Modify
1. `_sass/abstracts/_variables.scss`
2. All SCSS files with opacity values

#### Implementation Steps

**Step 1**: Add opacity scale
```scss
// _sass/abstracts/_variables.scss

:root {
  // Existing tokens...

  // ---------------------------------------------------------------------------
  // Opacity Scale
  // ---------------------------------------------------------------------------
  --opacity-0: 0;
  --opacity-5: 0.05;
  --opacity-10: 0.1;
  --opacity-20: 0.2;
  --opacity-30: 0.3;
  --opacity-40: 0.4;
  --opacity-50: 0.5;
  --opacity-60: 0.6;
  --opacity-65: 0.65;
  --opacity-70: 0.7;
  --opacity-80: 0.8;
  --opacity-90: 0.9;
  --opacity-95: 0.95;
  --opacity-100: 1;
}
```

**Step 2**: Find all opacity instances
```bash
grep -r "opacity:" _sass/ --include="*.scss"
```

**Step 3**: Replace opacity values

**Navigation**:
```scss
// _sass/layout/_navigation.scss

// BEFORE:
#mainNav.navbar-shrink {
  background-color: rgba(255, 255, 255, 0.95);
}

// AFTER:
#mainNav.navbar-shrink {
  background-color: rgba(255, 255, 255, var(--opacity-95));
}
```

**Portfolio Flip**:
```scss
// _sass/components/_portfolio-flip.scss

// BEFORE:
.portfolio-box-caption {
  opacity: 0;
}

&:hover .portfolio-box-caption {
  opacity: 1;
}

.project-category {
  opacity: 0.9;
}

// AFTER:
.portfolio-box-caption {
  opacity: var(--opacity-0);
}

&:hover .portfolio-box-caption {
  opacity: var(--opacity-100);
}

.project-category {
  opacity: var(--opacity-90);
}
```

**Buttons**:
```scss
// _sass/components/_buttons.scss

.btn {
  &.disabled,
  &[disabled],
  &:disabled {
    opacity: 0.65;
  }
}

// AFTER:
.btn {
  &.disabled,
  &[disabled],
  &:disabled {
    opacity: var(--opacity-65);
  }
}
```

#### Testing Checklist
- [ ] All hardcoded opacity values replaced
- [ ] Visual consistency maintained
- [ ] Hover states work correctly
- [ ] Disabled states visible

---

### Task 2.4: Replace All Magic Numbers
**Priority**: High
**Duration**: 2-3 hours
**Goal**: Zero magic numbers in codebase

#### Strategy

**Step 1**: Search for remaining magic numbers
```bash
# Find numeric values that aren't tokens
grep -rE ":\s*[0-9]+px" _sass/ --include="*.scss" | grep -v "var(--"

# Find numeric values in transitions
grep -rE "transition:.*[0-9\.]+s" _sass/ --include="*.scss" | grep -v "var(--"

# Find numeric opacity values
grep -rE "opacity:\s*[0-9\.]+" _sass/ --include="*.scss" | grep -v "var(--"
```

**Step 2**: Create audit spreadsheet
```
File                              | Line | Current Value | Token Replacement
----------------------------------|------|---------------|-------------------
_sass/components/_buttons.scss    | 18   | 300px         | var(--radius-pill)
_sass/layout/_navigation.scss     | 45   | 0.95          | var(--opacity-95)
_sass/components/_service-box.scss| 17   | 50px          | var(--space-xl)
```

**Step 3**: Replace systematically by category

**Spacing**:
- 8px → `var(--space-xs)`
- 16px → `var(--space-sm)`
- 20px → `var(--space-md)`
- 32px → `var(--space-lg)`
- 50px → `var(--space-xl)`
- 100px → `var(--space-2xl)`

**Font Sizes**:
- 13px → `var(--font-size-sm)`
- 14px → `var(--font-size-md)`
- 16px → `var(--font-size-base)`
- 18px → `var(--font-size-lg)`
- 22px → `var(--font-size-xl)`

**Border Radius**: (see Task 2.1)

**Opacity**: (see Task 2.3)

**Timing**: (see Task 2.2)

**Step 4**: Create new tokens for unique values
```scss
// If you find unique values that don't fit existing scales:

:root {
  // Component-specific tokens
  --navbar-height: 60px;
  --navbar-shrink-height: 50px;
  --portfolio-max-width: 650px;
  --service-box-max-width: 400px;
  --hero-min-height: 100vh;
}
```

#### Testing Checklist
- [ ] No hardcoded pixel values (except 0, 1px borders)
- [ ] No hardcoded opacity values
- [ ] No hardcoded timing values
- [ ] All spacing uses tokens
- [ ] All font sizes use tokens
- [ ] Visual appearance unchanged

---

### Task 2.5: Token Documentation
**Priority**: Medium
**Duration**: 1 hour
**Goal**: Comprehensive token documentation

#### Create Token Reference

**File**: `docs/02-components/00-design-tokens.md`

```markdown
# Design Token System Reference

## Overview

This project uses a 4-tier design token system for systematic, scalable theming.

## Token Hierarchy

```
Palette Tokens (_data/color-palettes.yml)
    ↓
Raw Color Tokens (--color-primary-500)
    ↓
Semantic Tokens (--color-primary, --color-text)
    ↓
Component Usage (var(--color-primary))
```

## Token Categories

### 1. Color Tokens

#### Palette Selection (User Configurable)
_config.yml:
```yaml
theme:
  brand_primary: "blue"      # orange|blue|green|purple|red
  brand_secondary: "green"   # orange|blue|green|purple|red|null
  neutral: "slate"           # slate|gray
  mode: "light"              # light|dark|auto
```

#### Raw Color Tokens
Generated from palette selection:
- `--color-primary-50` through `--color-primary-900` (10 shades)
- `--color-secondary-50` through `--color-secondary-900` (optional)
- `--color-neutral-50` through `--color-neutral-900`

#### Semantic Color Tokens
Contextual meaning:
- `--color-primary` - Main brand color
- `--color-primary-hover` - Hover state
- `--color-primary-active` - Active/pressed state
- `--color-text` - Body text
- `--color-text-secondary` - Secondary text
- `--color-text-muted` - Muted/disabled text
- `--color-background` - Page background
- `--color-surface` - Card/panel background
- `--color-border` - Border colors

### 2. Spacing Tokens (8pt Grid)

| Token           | Value   | Use Case                    |
|-----------------|---------|----------------------------|
| `--space-xs`    | 0.5rem  | 8px - Tight spacing        |
| `--space-sm`    | 1rem    | 16px - Small spacing       |
| `--space-md`    | 1.25rem | 20px - Medium spacing      |
| `--space-lg`    | 2rem    | 32px - Large spacing       |
| `--space-xl`    | 3.125rem| 50px - Extra large spacing |
| `--space-2xl`   | 6.25rem | 100px - Section spacing    |

### 3. Typography Tokens

**Font Families**:
- `--font-sans`: Open Sans (headings, UI)
- `--font-serif`: Merriweather (body text)

**Font Sizes**:
- `--font-size-sm`: 13px
- `--font-size-md`: 14px
- `--font-size-base`: 16px
- `--font-size-lg`: 18px
- `--font-size-xl`: 22px

**Font Weights**:
- `--font-weight-normal`: 400
- `--font-weight-medium`: 600
- `--font-weight-bold`: 700

**Line Heights**:
- `--line-height-tight`: 1.2
- `--line-height-base`: 1.5

### 4. Border Radius Tokens

| Token             | Value  | Use Case                |
|-------------------|--------|------------------------|
| `--radius-none`   | 0      | No rounding            |
| `--radius-xs`     | 2px    | Minimal (tags)         |
| `--radius-sm`     | 3px    | Small (tooltips)       |
| `--radius-md`     | 5px    | Medium (inputs, cards) |
| `--radius-lg`     | 10px   | Large (modals)         |
| `--radius-xl`     | 15px   | Extra large            |
| `--radius-2xl`    | 20px   | Maximum rounding       |
| `--radius-pill`   | 300px  | Pills (buttons)        |
| `--radius-circle` | 50%    | Perfect circles        |

### 5. Animation Timing Tokens

**Duration**:
- `--duration-instant`: 0.1s
- `--duration-fast`: 0.2s
- `--duration-normal`: 0.35s
- `--duration-slow`: 0.5s
- `--duration-slower`: 0.75s
- `--duration-slowest`: 1s
- `--duration-extra-slow`: 1.5s

**Delay** (for staggered animations):
- `--delay-0`: 0s
- `--delay-1`: 0.1s
- `--delay-2`: 0.2s
- `--delay-3`: 0.3s
- `--delay-4`: 0.4s
- `--delay-5`: 0.5s

**Easing**:
- `--ease-linear`: linear
- `--ease-in`: cubic-bezier(0.4, 0, 1, 1)
- `--ease-out`: cubic-bezier(0, 0, 0.2, 1)
- `--ease-in-out`: cubic-bezier(0.4, 0, 0.2, 1)
- `--ease-bounce`: cubic-bezier(0.68, -0.55, 0.265, 1.55)

**Combined**:
- `--transition-instant`: 0.1s ease-out
- `--transition-fast`: 0.2s ease-out
- `--transition-normal`: 0.35s ease-in-out
- `--transition-slow`: 0.5s ease-in-out

### 6. Opacity Tokens

- `--opacity-0`: 0
- `--opacity-5`: 0.05
- `--opacity-10`: 0.1
- `--opacity-20`: 0.2
- `--opacity-30`: 0.3
- `--opacity-40`: 0.4
- `--opacity-50`: 0.5
- `--opacity-60`: 0.6
- `--opacity-65`: 0.65
- `--opacity-70`: 0.7
- `--opacity-80`: 0.8
- `--opacity-90`: 0.9
- `--opacity-95`: 0.95
- `--opacity-100`: 1

### 7. Shadow Tokens

Light theme:
- `--shadow-sm`: 0 1px 3px rgba(0, 0, 0, 0.12)
- `--shadow-md`: 0 4px 6px rgba(0, 0, 0, 0.1)
- `--shadow-lg`: 0 10px 25px rgba(0, 0, 0, 0.15)

Dark theme (stronger for depth):
- `--shadow-sm`: 0 1px 3px rgba(0, 0, 0, 0.5)
- `--shadow-md`: 0 4px 6px rgba(0, 0, 0, 0.4)
- `--shadow-lg`: 0 10px 25px rgba(0, 0, 0, 0.6)

### 8. Z-Index Tokens

- `--z-base`: 1
- `--z-dropdown`: 1000
- `--z-sticky`: 1020
- `--z-fixed`: 1030
- `--z-modal-backdrop`: 1040
- `--z-modal`: 1050
- `--z-popover`: 1060
- `--z-tooltip`: 1070

## Usage Guidelines

### ✅ Do

```scss
// Use semantic tokens in components
.button {
  background: var(--color-primary);
  padding: var(--space-md);
  border-radius: var(--radius-pill);
  transition: all var(--transition-normal);
}
```

### ❌ Don't

```scss
// Don't use magic numbers
.button {
  background: #3b82f6;
  padding: 20px;
  border-radius: 300px;
  transition: all 0.35s ease;
}
```

### Theme-Aware Components

```scss
.component {
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);

  &:hover {
    background: var(--color-primary);
    color: var(--color-text-inverse);
  }
}

// Automatically adapts to light/dark mode!
```

## Customization

Users can customize colors by editing `_config.yml`:

```yaml
theme:
  brand_primary: "purple"    # Change primary color
  brand_secondary: "blue"    # Add accent color
  neutral: "gray"            # Change neutral palette
  mode: "dark"               # Set default theme mode
```

Colors are resolved from `_data/color-palettes.yml` and applied via `_includes/design-tokens.html`.
```

#### Testing Checklist
- [ ] Documentation created
- [ ] All token categories documented
- [ ] Usage examples provided
- [ ] Guidelines clear

---

## Phase 2 Testing Strategy

### Token Audit
```bash
# Verify no magic numbers remain
npm run lint:tokens  # (create this script)

# Script checks for:
# - Hardcoded px values (except 0, 1px)
# - Hardcoded opacity values
# - Hardcoded timing values
# - Hardcoded hex colors
```

### Visual Regression
- [ ] Screenshot before token migration
- [ ] Screenshot after token migration
- [ ] Compare - should be identical

### Manual Testing
- [ ] All animations smooth
- [ ] All spacing consistent
- [ ] All border radius appropriate
- [ ] Theme toggle works
- [ ] Light/dark mode consistent

---

## Success Metrics

- [ ] 100% token coverage (no magic numbers)
- [ ] All tokens documented
- [ ] Visual appearance unchanged
- [ ] Build completes without errors
- [ ] No console warnings

---

## Deliverables

### Code
- [ ] Updated `_sass/abstracts/_variables.scss`
- [ ] Updated all component SCSS files
- [ ] Updated `_config.yml` (remove hardcoded delays)

### Documentation
- [ ] `docs/02-components/00-design-tokens.md`
- [ ] Token audit report
- [ ] Before/after screenshots

---

## Sign-Off

### Completed Tasks
- [ ] Task 2.1: Border radius tokens
- [ ] Task 2.2: Animation timing tokens
- [ ] Task 2.3: Opacity tokens
- [ ] Task 2.4: Replace magic numbers
- [ ] Task 2.5: Token documentation

### Phase 2 Complete
- [ ] 100% token coverage achieved
- [ ] All tests passing
- [ ] Documentation complete
- [ ] Ready for Phase 3

**Completed By**: _____________
**Date**: _____________

---

**Document Status**: ✅ Ready for Implementation
**Last Updated**: October 1, 2025
**Next Phase**: 04-20251001-001.03-phase-3-css-modernization.md
