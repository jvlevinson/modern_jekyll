// =============================================================================
// Navigation Layout (BEM Structure)
// =============================================================================
// Bootstrap 5 compatible navbar with scroll behavior
// Following BEM naming convention and October 2025 best practices
// Migrated to BEM in Phase 4
// =============================================================================

@use '../abstracts' as *;

// -----------------------------------------------------------------------------
// Navigation Container
// -----------------------------------------------------------------------------
// Fixed position navbar with transparent-to-solid scroll behavior
// Uses semantic tokens for user-customizable colors
// -----------------------------------------------------------------------------
.nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed);
    background-color: var(--bg-light);
    font-family: var(--font-sans);
    transition: all var(--transition-normal);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    // -----------------------------------------------------------------------------
    // Navigation Brand (Logo)
    // -----------------------------------------------------------------------------
    &__brand {
        color: var(--color-primary);
        font-family: var(--font-sans);
        font-weight: var(--font-weight-bold);
        text-transform: uppercase;
        text-decoration: none;
        transition: color var(--transition-normal);

        &:hover,
        &:focus {
            color: var(--color-primary-hover);
        }
    }

    // -----------------------------------------------------------------------------
    // Navigation Menu (List Container)
    // -----------------------------------------------------------------------------
    &__menu {
        // Bootstrap handles list styling
    }

    // -----------------------------------------------------------------------------
    // Navigation Item (List Item)
    // -----------------------------------------------------------------------------
    &__item {
        // Bootstrap handles item styling

        // Active state
        &.active .nav__link {
            color: var(--color-primary);
        }
    }

    // -----------------------------------------------------------------------------
    // Navigation Link
    // -----------------------------------------------------------------------------
    &__link {
        text-transform: uppercase;
        font-weight: var(--font-weight-bold);
        font-size: 0.8125rem; // 13px
        color: var(--color-text);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-sm);
        transition: all var(--transition-fast);
        text-decoration: none;

        &:hover,
        &:focus {
            color: var(--color-primary);
        }

        // Scroll behavior modifier
        &--scroll {
            cursor: pointer;
        }
    }

    // -----------------------------------------------------------------------------
    // Navigation Toggle (Mobile Menu Button)
    // -----------------------------------------------------------------------------
    &__toggle {
        // Bootstrap handles toggle styling
    }

    // -----------------------------------------------------------------------------
    // Shrink Modifier (Scrolled State)
    // -----------------------------------------------------------------------------
    // Applied via JavaScript when user scrolls down
    // Changes from transparent to solid background
    // -----------------------------------------------------------------------------
    &--shrink {
        background-color: var(--navbar-bg-scrolled);
        box-shadow: var(--shadow-sm);

        .nav__brand {
            color: var(--color-primary);
            font-size: 1rem; // Keep constant size (Phase 1 fix)

            &:hover,
            &:focus {
                color: var(--color-primary-hover);
            }
        }

        .nav__link {
            color: var(--color-text);

            &:hover,
            &:focus {
                color: var(--color-primary);
            }
        }
    }
}

// -----------------------------------------------------------------------------
// Desktop Navigation Behavior
// -----------------------------------------------------------------------------
// Transparent navbar on page load, solid on scroll
// Large screens only (992px and up)
// -----------------------------------------------------------------------------
@media (min-width: 992px) {
    .nav {
        // Initial state - semi-transparent with blur effect and white text
        background-color: var(--navbar-bg);

        .nav__brand {
            color: var(--color-text-faded);

            &:hover,
            &:focus {
                color: var(--bg-light);
            }
        }

        .nav__link {
            color: var(--color-text-faded);

            &:hover,
            &:focus {
                color: var(--bg-light);
            }
        }
    }
}

// -----------------------------------------------------------------------------
// Dark Mode Enhanced Hover States
// -----------------------------------------------------------------------------
[data-theme="dark"] {
    .nav__link {
        &:hover,
        &:focus {
            color: var(--nav-link-hover-color);
            background: var(--nav-link-hover-bg);
            text-decoration: none;
        }
    }
}

// -----------------------------------------------------------------------------
// Backward Compatibility (Temporary)
// -----------------------------------------------------------------------------
// Support old Bootstrap class names during migration
// Remove after all templates updated
// -----------------------------------------------------------------------------
.navbar-light {
    @extend .nav;
}

.navbar-brand {
    @extend .nav__brand;
}

.navbar-nav {
    @extend .nav__menu;
}

.nav-item {
    @extend .nav__item;
}

.nav-link {
    @extend .nav__link;
}

.navbar-shrink {
    @extend .nav--shrink;
}

.page-scroll {
    @extend .nav__link--scroll;
}
